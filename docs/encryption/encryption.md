---
title: Step 1 - Encryption in Unity
layout: default
parent: Notebook 3 – Encryption and Decryption 
---


## Encrypting Data in Unity

The easiest way to securely encrypt data within our Unity experiment is by utilizing C#’s built-in AES implementation via the `System.Security.Cryptography` namespace. 
We have implemented AES encryption in the `Encrypt()` function, which is part of the `ConnectionHandler.cs` script. 

{: .highlight}
If you're just replicating the overall pipeline, feel free to test it with the preconfigured encryption key. No need to edit anything – everything should run as is. You can always replace the encryption key with your own keys once you integrate the provided code into your own project!


## Overview
To use the `Encrypt()` function, our unity app needs access the key piece of information: the **encryption key**.   

The encryption key needs to be specified within our web application – this way we ensure that it is not included in any code we publicly share. Have a look at the `encryption_key` variable within the bottle_app.py script. 

The client (i.e., VR task on the participant's computer) then retrieves the encryption key as part of the initial GET request. The `Encrypt()` function then uses the retrieved encryption key to encrypt any data before it is uploaded by the `Upload()` function as part of a PUT request. 


![](../../assets/images/EncryptionPipeline.png)


The **Initialisation Vector (IV)** – which is the second critical aspect of AES encryption – is randomly generated by the `Encrypt()` function and transferred as part of the experiment data. The provided decryption function (see [Step 2](https://lkumle.github.io/onlineVRtoolbox_tutorials/docs/encryption/decryption.html)) then automatically retrieves this IV. That is, we don't need to worry about specifyng a IV. However, in case you are interested, see "Details for `Encrypt()`-function" below. 
  

---
___

## Configuring the encryption key

Once you are adapting this pipeline to your own project, you should use your own unique encryption key. To change the encryption key, simply

1. go to your server on pythonanythwere.com and open the bottle_app.py script. 
2. In the configuration section, modify the variables `encryptionKey` by exchanging it with your own key. 

Afterwards, we recommend navigating to the "Web"-tab on Pythonanywhere and clicking "Reload" to make sure the edits are online. 

![](../../assets/images/encryption1.png)


**How to create an encryption key:**
- The key needs to have a lengths of 16, 24 or 32 bytes
- In our case, we specify the key as a string. The `Encrypt()` function then converts this string into a byte array using UTF-8 encoding. As such, any 16/24/32 character string using ASCII characters will result in a valid encryption key. 

Note that ASCII-based AES keys that are hardcoded in the server backend (i.e., solution implemented in the onlineVR-toolbox) does not correspond the absolute highest possible security standard (i.e., if the server is compromised the key will be available and any data could potentially be decrypted). As a general note, we recommend only transferring and storing deidentified research data through the pipeline provided within the onlineVR-toolbox. Any personal or sensitive data should be collected through reseach specific platforms (e.g., Pavlovia or Quatrics). 

---
--- 

## Details for `Encrypt()`-function




