---
title: Step 1 - Encryption in Unity
layout: default
parent: Notebook 3 – Encryption and Decryption 
---


## Encrypting Data in Unity

The easiest way to securely encrypt data within our Unity experiment is by utilizing C#’s built-in AES implementation via the `System.Security.Cryptography` namespace. 
We have implemented AES encryption in the `Encrypt()` function, which is part of the `ConnectionHandler.cs` script. 


## Overview
To use the `Encrypt()` function, our unity app needs access the key piece of information: the **encryption key**.   

The encryption key needs to be specified within our web application – this way we ensure that it is not included in any code we publicly share. 
The client (i.e., VR task on the participant's computer) then retrieves the encryption key as part of the initial GET request. The `Encrypt()` function then uses the retrieved encryption key to encrypt any data before it is uploaded by the `Upload()` function as part of a PUT request. 


![](../../assets/images/EncryptionPipeline.png)


The Initialisation Vector (IV) – which is the second critical aspect of AES encryption – is randomly generated by the `Encrypt()` function and transferred as part of the experiment data. The provided decryption function (see [Step 2](https://lkumle.github.io/onlineVRtoolbox_tutorials/docs/encryption/decryption.html)) then automatically retrieves this IV. That is, we don't need to worry about specifyng a IV. However, in case you are interested, see "Details for `Encrypt()`-function" below. 
  
  


{: .highlight}
If you're just testing the overall pipeline, feel free to test it with the preconfigured encryption key. No need to edit anything – everything should run as is. You can always replace the encryption key with your own keys once you integrate the provided code into your own project!


---
___

## Configuring your own encryption key. 
1. go to your server on pythonanythwere.com, specify the 
2. In the configuration section, modify the variables `encryptionKey` with your own key. 

Go to WEB tab and hit reload domain thing. otherwise can take a while to be online.

<div style="text-align: center;">
  <img src="/Users/levikumle/Library/CloudStorage/OneDrive-Nexus365/1_Research/ObjectSorting/onlineVR/5_tutorialResources/Decryption/decryption1.png" alt="C# implementation" style="width: 1000%;">
</div>

  
**How to create an encryption key:**
- The key needs to have a lengths of 16, 24 or 32 bytes
- In our case, we specify the key as a string. The `Encrypt()` function then converts this string into a byte array using UTF-8 encoding. As such, any 16/24/32 character string using ASCII characters will result in a valid encryption key. 

Note that ASCII-based AES keys that are hardcoded in the server backend does not correspond the highest possible security standard (i.e., if the server is compromised the key is available). As a general note, no identifiable personal data should be transferred and stored from the unity app. Only deidentified reserch data. If you plan to transfer sensitive data, make sure to work with your university data protection team to ensure that the data transfer is secure enough to comply with insitutional guidelines. 

**How IVs are transferred**:
Randomly generated each time we are encrypting data. Then added to the beginning of the encrypted data. Trnsferred with the data. As said above, the IV is not secret and can be transferred with the data. 

That’s it! You’re ready to encrypt your data.



## Details for `Encrypt()`-function

Here is a detailed information about the encrytpt function:

[add code of encrypt function]


